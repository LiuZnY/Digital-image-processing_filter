question1.m
%手动编写的中值滤波程序
[I,map]=imread('test1.pgm','pgm');
figure(1);
imshow(I,map);
imwrite(I,'test1原始图像.bmp');
title('test1.pgm原始图像');
figure(2);
n=3; 
a=ones(n,n);
p=size(I);   
x1=double(I);
x2=x1;
for i=1:p(1)-n+1  
    for j=1:p(2)-n+1   
        c=x1(i:i+(n-1),j:j+(n-1));
        e=[];
        for k=1:n      
        e=[e,c(k,:)];          
        end
        middle=median(e);    
        x2(i+(n-1)/2,j+(n-1)/2)=middle;   
    end
end
I2=uint8(x2);
imshow(I2,map); 
title('中值滤波后的test1.pgm（3x3）');
 
%调用MATLAB中medfilt2函数进行中值滤波
I1=medfilt2(I,[3 3]); 
I2=medfilt2(I,[5 5]); 
I3=medfilt2(I,[7 7]); 
figure;
subplot(2,2,1);
imshow(I,map);
title('test1.pgm原始图像');
subplot(2,2,2);
imshow(I1,map);
title('中值滤波平滑后的test1.pgm(3x3)');
subplot(2,2,3);
imshow(I2,map);
title('中值滤波平滑后的test1.pgm(5x5)');
subplot(2,2,4);
imshow(I3,map);
title('中值滤波平滑后的test1.pgm(7x7)');

question1-2.m
%手动编写的高斯滤波器
clear;clc;
sigma1=1.5;sigma2=1.5;
theta=0;  
[I,map]=imread('test1.pgm','pgm');     
r=[1,0;0,1]; 
for i=1:3     
    for j=1:3       
        u=r*[j-(n1+1)/2,i-(n2+1)/2]'; 
        h(i,j)=exp(-u(1)^2/(2*sigma1^2))/(sigma1*sqrt(2*pi))*exp(-u(2)^2/(2 *sigma2^2))/(sigma2*sqrt(2*pi));           
    end
end
h=h/sqrt(sum(sum(h.*h)));
f1=conv2(double(I),double(h),'same'); %二维卷积
figure(1);  
imshow(I);
title('原图像：test1.pgm'); 
figure(2); 
imshow(f1,map);
title('高斯滤波平滑后的test1.pgm(3x3)'); 

 
%用MATLAB中fspecial函数生成高斯滤波器
clear;clc;
[I,map]=imread('test1.pgm','pgm');     
h=fspecial('gaussian',[3 3],1);%建立一个3*3模板的高斯滤波器
h1=fspecial('gaussian',[5 5],1);
h2=fspecial('gaussian',[7 7],1);
I1=imfilter(I,h,'conv');
I2=imfilter(I,h1,'conv');
I3=imfilter(I,h2,'conv');
figure;
subplot(2,2,1);
imshow(I,map);
title('test1.pgm原始图像');
subplot(2,2,2);
imshow(I1,map);
title('高斯滤波平滑后的test1.pgm(3x3)');
subplot(2,2,3);
imshow(I2,map);
title('高斯滤波平滑后的test1.pgm(5x5)');
subplot(2,2,4);
imshow(I3,map);
title('高斯滤波平滑后的test1.pgm(7x7)');



Unsharp_masking.m
clear;clc;
IM=imread('test3_corrupt.pgm','pgm'); 
I=IM;  
IMSize=size(IM); 
IM=cast(IM,'int32');  
t=zeros(IMSize(1)+2,IMSize(2)+2); 
t=cast(t,'int32');   
t(2:IMSize(1)+1,2:IMSize(2)+1) = IM;
t(:,1)=t(:,2); 
t(:,IMSize(2)+2)=t(:,IMSize(2)+1);
t(1,:)=t(2,:); 
t(IMSize(1)+2,:)=t(IMSize(1)+1,:);
A=1.0; 
for i=2:1:IMSize(1)+1   
    for j=2:1:IMSize(2)+1        IM(i-1,j-1)=t(i,j)*A-(t(i,j)*(-8)+t(i,j-1)+t(i-1,j-1)+t(i-1,j)+t(i,j+1)+t(i+1,j)+t(i+1,j+1)+t(i+1,j-1)+t(i-1,j+1));  
    end
end
IM=cast(IM,'uint8');
imwrite(IM,['UnsharpMasking_A_', num2str(10*A),'.png'],'png');
figure;
subplot(2,2,1) 
imshow(I); 
title('原图像―test3_corrupt.pgm');
subplot(2,2,2)
imshow(IM);
title('反锐化掩膜后的test3_corrupt,pgm');
IM=imread('test4 copy.bmp'); 
I=IM;  
IMSize=size(IM); 
IM=cast(IM,'int32');  
t=zeros(IMSize(1)+2,IMSize(2)+2); 
t=cast(t,'int32');   
t(2:IMSize(1)+1,2:IMSize(2)+1) = IM;
t(:,1)=t(:,2); 
t(:,IMSize(2)+2)=t(:,IMSize(2)+1);
t(1,:)=t(2,:); 
t(IMSize(1)+2,:)=t(IMSize(1)+1,:);
A=1.0; 
for i=2:1:IMSize(1)+1   
    for j=2:1:IMSize(2)+1        IM(i-1,j-1)=t(i,j)*A-(t(i,j)*(-8)+t(i,j-1)+t(i-1,j-1)+t(i-1,j)+t(i,j+1)+t(i+1,j)+t(i+1,j+1)+t(i+1,j-1)+t(i-1,j+1));  
    end
end
IM=cast(IM,'uint8');
imwrite(IM,['UnsharpMasking_A_', num2str(10*A),'.png'],'png');
subplot(2,2,3) 
imshow(I); 
title('原图像―test4 copy.bmpm');
subplot(2,2,4)
imshow(IM);
title('反锐化掩膜后的test4 copy.bmp');


Sobel edge.m
%自己编写的sobel算子边缘检测
I=imread('test3_corrupt.pgm','pgm'); 
figure(1);
subplot(1,2,1);
imshow(I);
title('原图像――test3_corrupt.pgm');
[N,M]=size(I);
I=double(I);
h1=[-1,0,1;-2,0,2;-1,0,1];
h2=[-1,-2,-1;0,0,0;1,2,1];
Gx=conv2(I,h1,'same'); 
Gy=conv2(I,h2,'same'); 
F=abs(Gx)+abs(Gy); 
for i=1:N    
    for j=1:M    
        I(i,j)=F(i,j); 
    end
end
I=uint8(I);
subplot(1,2,2);
imshow(I); 
title('Sobel 边缘检测――test3_corrupt.pgm');
 
%调用MATLAB中edge函数
clear;clc;
I1=imread('test3_corrupt.pgm','pgm'); 
A1=imread('test4 copy.bmp'); 
figure;
subplot(2,2,1);
imshow(I1);
title('原图像―test3 corrupt.pgm');
I2=edge(I1,'sobel');
subplot(2,2,2);
imshow(I2);
title('Sobel边缘检测test3_corrupt.pgm');
subplot(2,2,3);
imshow(A1);
title('原图像―test4 copy.bmp');
A2=edge(A1,'sobel');
subplot(2,2,4);
imshow(A2);
title('Sobel边缘检测test3 corrupt.pgm');


Laplacian_edge.m
I=imread('test3_corrupt.pgm','pgm'); 
I1 = imread('test4 copy.bmp','bmp'); 
[N,M]=size(I);
[N1,M1]=size(I1);
figure; 
subplot(2,2,1); 
imshow(I);  
title('test3_corrupt.pgm');
t=ones(N,M); 
t=I;  
for i=2:N-1   
    for j=2:M-1    
        I(i,j)=t(i+1,j)+t(i-1,j)+t(i,j+1)+t(i,j-1)-4*t(i,j);  
    end
end
subplot(2,2,2); 
imshow(I); 
title('Laplacian边缘检测test3_corrupt.pgm');
subplot(2,2,3); 
imshow(I1);  
title('test4 copy.bmp');
t1=ones(N,M); 
t1=I1;  
for i=2:N-1   
    for j=2:M-1    
        I(i,j)=t1(i+1,j)+t1(i-1,j)+t1(i,j+1)+t1(i,j-1)-4*t1(i,j);  
    end
end
subplot(2,2,4); 
imshow(I); 
title('Laplacian边缘检测test4 copy.bmp');


Canny.m
I=imread('test3_corrupt.pgm');
A1 = imread('test4 copy.bmp','bmp'); 
subplot(2,2,1);
imshow(I);
title('原图像―test3 corrupt.pgm');
I1=edge(I,'canny');
subplot(2,2,2);
imshow(I1);
title('Canny边缘检测test3_corrupt.pgm');
subplot(2,2,3);
imshow(A1);
title('原图像―test4 copy.bmp');
A2=edge(A1,'canny');
subplot(2,2,4);
imshow(A2);
title('Canny边缘检测test4 copy.bmp');
